<!DOCTYPE html>
<html>
	<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vaafb692b2aea4879b33c060e79fe94621666317369993" integrity="sha512-0ahDYl866UMhKuYcW078ScMalXqtFJggm7TmlUtp0UlD4eQk0Ixfnm5ykXKvGJNFjLMoortdseTfsRT8oCfgGA==" data-cf-beacon='{"rayId":"76e50f826ed29956","version":"2022.11.3","r":1,"token":"41e3bf83fbc54099b0e9960e461f0e4d","si":100}' crossorigin="anonymous"></script>
    <head>
        <title>TASK.com</title>
		{% include 'imports.html' %}
    </head>
    <body class="forceOpenSans">
		<!-- <script>
			function check()
			{
			 var check=document.getElementsByTagName('input');
			 for(var i=0;i<check.length;i++)
			 {
			  if(check[i].type=='checkbox')
			  {
			   check[i].checked=true;
			  }
			 }
			}
			
			function uncheck()
			{
			 var uncheck=document.getElementsByTagName('input');
			 for(var i=0;i<uncheck.length;i++)
			 {
			  if(uncheck[i].type=='checkbox')
			  {
			   uncheck[i].checked=false;
			  }
			 }
			}
			</script> -->
			<div id="wrapper">
			<!-- <input type="button" value="Check All" onclick="check();">
			<input type="button" value="Uncheck All" onclick="uncheck();">
		 -->
			</div>
			
    {% include 'header.html' %}
    <div class="container-fluid"style ="max-width:750px; justify-content:center; background-color:white" >
		<div style="margin-top: 10px;">
			<center>
				<h2 style ="margin-left: 15%; margin-right: 15%; width:70%; justify-content:center; background-color:white">Enter Diner Data</h2>
				<hr>
				<h4 style ="margin-left: 15%; margin-right: 15%; width:70%; justify-content:center; background-color:white">You are in {{mealsite}}</h4>
			</center>
		</div>
		<hr>
		<form id = "patronForm" action="/submitpatrondata?mealsite={{mealsite}}" onsubmit="return validateForm()" method="get"background-color: white;">
			<div class="row" id = "wrapper">
				<div class="col-sm-4">
					<center>
					<div class="row">
						<center><p>Race (Select All That Apply)</p></center>
					</div>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="race-btns" data-toggle="buttons">
							<!-- <input type="checkbox" class="btn-check" checked id="btn" autocomplete="off">
							<label class="btn btn-secondary inactive-button" for="btn">btn</label> -->

							{%for race in ['White','Black','American Indian/Alaska Native', 
							'Native Hawaiian/ Pacific Islander','Hispanic','Unknown']%}
							{% if race == 'Unknown' %}
							<input type="checkbox" class="btn-check form-control patronInput mainButton" checked id="btn-{{race}}" autocomplete="off" name="race" value={{race}}>
							<label class="btn btn-secondary inactive-button" for="btn-{{race}}">{{race}}</label>
							<!-- <label class="btn btn-secondary active"> 
								<input type="checkbox" checked class="btn-check" id="btn-{{race}}" name="race" value={{race}}> {{race}}
							</label> -->
							{%else%}
							<input type="checkbox" class="btn-check form-control patronInput mainButton" id="btn-{{race}}" autocomplete="off" name="race" value={{race}}>
							<label class="btn btn-secondary inactive-button" for="btn-{{race}}">{{race}}</label>
							{%endif%}
							<!-- <label id = "toggle-button-{{race}}" for="btn-check-{{race}}">{{race}} </label> -->
							{%endfor%}
							<!-- <select class="form-select-sm" style="width: 120.5px">  
								<option selected>More options</option>
								{% for race in ['American Indian/Alaska Native', 
								'Native Hawaiian/Pacific Islander'] %}
								<option value="{{race}}">{{race}}</option>
								{% endfor %}
							</select> -->
							<input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
						</div>
						
					
					<!-- <div class="row">
						<center>
							<text>Other: </text>
							<select name="otherraces" id = "otherraces">  
								{% for race in ['Unknown', 'American Indian/Alaska Native', 'Native Hawaiian/ Pacific Islander'] %}
								<option value="{{race}}">{{race}}</option>
								{% endfor %}
							</select>
						</center>
					</div> -->
				</center>
				</div>
				
				<div class="col-sm-4">
					<div class="row">
						<center><p>Age Range</p></center>
					</div>
					<div class="row">
						<center>
							<div class= "btn-group-vertical" role="group" id="age-btns" data-toggle="buttons">
								{% autoescape true %}
								{%for age in ['<18','18-29', '30-42', '43-54', '55-66', '>66']%}
								<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-age-{{age}}" name="age_range" value={{age}}>
								<label class="btn btn-secondary inactive-button" id = "toggle-button-{{age}}" for="btn-age-{{age}}">{{age}} </label>
								{%endfor%}
								<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-age-Unknown" name="age_range" value="Unknown">
								<label class="btn btn-secondary inactive-button" id = "toggle-age-Unknown" for="btn-age-Unknown">Unknown</label>
								{% endautoescape %}
							</div>
						</center>
					</div>
				</div>
				<div class="col-sm-4">
					<div class="row">
						<center><p>Zip Code</p></center>
					</div>
					<center>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="zip-btns" data-toggle="buttons">
							{%for zip in zip_codes%}
							<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-zip-{{zip}}" name="zip_codes" value={{zip}}>
							<label class="btn btn-secondary inactive-button" id = "toggle-zip-{{zip}}" for="btn-zip-{{zip}}">{{zip}} </label>
							{%endfor%}
							<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-zip-Unknown" name="zip_codes" value="Unknown">
							<label class="btn btn-secondary inactive-button" id = "toggle-zip-Unknown" for="btn-zip-Unknown">Unknown </label>
						</div>
					</center>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col-sm-4">
					<div class="row">
						<center><p>Language</p></center>
					</div>
					<div class="row">
						<center>
							<div class="btn-group-vertical btn-group-toggle" role="group" id="lang-btns" data-toggle="buttons">
								{%for lang in ['English','Spanish']%}
								<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-lang-{{lang}}" name="language" value={{lang}}>
								<label class="btn btn-secondary inactive-button" id = "toggle-lang-{{lang}}" for="btn-lang-{{lang}}">{{lang}} </label>
								{%endfor%}
								<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-lang-Unknown" name="language" value="Unknown">
								<label class="btn btn-secondary inactive-button" id = "toggle-lang-Unknown" for="btn-lang-Unknown">Unknown</label>
								<select class="form-select-sm" id="lang-more-options">  
									<option selected>More options</option>
									{% for lang in otherlanguages %}
									<option id="{{lang}}-option" value="{{lang}}">{{lang}}</option>
									{% endfor %}
								</select>
							</div>
						</center>
					</div>
					<!-- <div class="row">
						<center>
							<text>Other: </text>
							<select name="otherlangs" id = "otherlangs">  
								{% for lang in otherlanguages %}
								<option value="{{lang}}">{{lang}}</option>
								{% endfor %}
							</select>
						</center>
					</div> -->
				</div>
				<div class="col-sm-4">
					<div class="row">
						<center><p>Gender</p></center>
					</div>
					<center>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="gender-btns" data-toggle="buttons">
						<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-gender-Male" name="gender" value="Male">
						<label class="btn btn-secondary inactive-button" id = "toggle-gender-male" for="btn-gender-Male">Male</label>
						<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-gender-Female" name="gender" value="Female">
						<label class="btn btn-secondary inactive-button" id = "toggle-gender-female" for="btn-gender-Female">Female</label>
						<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-gender-Unknown" name="gender" value="Unknown">
						<label class="btn btn-secondary inactive-button" id = "toggle-gender-Unknown" for="btn-gender-Unknown">Unknown</label>
						<select id="gender-more-options" class="form-select-sm">
							<option selected>More options</option>
							{% for gender in ['Non-Binary', 'TransMale', 'TransFemale', 'Other'] %}
							<option name="gender" value="{{gender}}">{{gender}}</option>
							{% endfor %}
						</select>
						<!-- <label class="btn btn-secondary inactive-button" id = "toggle-gender-options">
							
						</label> -->
						

						<!-- <ul class="dropdown-menu">
							{% for gender in ['Non-Binary', 'TransMale', 'TransFemale', 'Other'] %}
							<li><a class="dropdown-item" id="btn-gender-{{gender}}" name="gender" value="{{gender}}">{{gender}}</a></li>
							{% endfor %}
						</ul> -->
						</div>
					<!-- </center>
					<div class="row">
					<center>
						<select class="form-select" aria-label="Click here to select other gender options" name="othergenders">
							<option selected>More options</option>
							{% for gender in ['Non-Binary', 'TransMale', 'TransFemale', 'Other'] %}
							<option value="{{gender}}">{{gender}}</option>
							{% endfor %}
						</select>
					</center> 
					</div>-->
				</div>
				
				<div class="col-sm-4">
					<div class="row">
						<center><p>Homeless</p></center>
					</div>
					<center>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="homeless-btns" data-toggle="buttons">
							{%for homeless in ["True", "False"]%}
							<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-homeless-{{homeless}}" name="homeless" value={{homeless}}>
							<label class="btn btn-secondary inactive-button" id = "toggle-homeless-{{zip}}" for="btn-homeless-{{homeless}}">{{homeless}} </label>
							{%endfor%}
							<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-homeless-Unknown" name="homeless" value="Unknown">
							<label class="btn btn-secondary inactive-button" id = "toggle-homeless-Unknown" for="btn-homeless-Unknown">Unknown</label>
						</div>
					</center>
					</div>
				</div>

				<br>
			<div class = "row">
				<div class="col-sm-4">
					<div class="row">
						<center><p>Veteran</p></center>
					</div>
					<center>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="veteran-btns" data-toggle="buttons">
							{%for option in ["True", "False"]%}
							<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-veteran-{{option}}" name="veteran" value={{option}}>
							<label class="btn btn-secondary inactive-button" id = "toggle-veteran-{{option}}" for="btn-veteran-{{option}}">{{option}} </label>
							{%endfor%}
							<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-veteran-Unknown" name="veteran" value="Unknown">
							<label class="btn btn-secondary inactive-button" id = "toggle-veteran-Unknown" for="btn-veteran-Unknown">Unknown</label>
						</div>
					</center>
					</div>
				
				<div class="col-sm-4">
					<div class="row">
						<center><p>Disabled</p></center>
					</div>
					<center>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="disabled-btns" data-toggle="buttons">
							{%for option in ["True", "False"]%}
							<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-disabled-{{option}}" name="disabled" value={{option}}>
							<label class="btn btn-secondary inactive-button" id = "toggle-disabled-{{option}}" for="btn-disabled-{{option}}">{{option}} </label>
							{%endfor%}
							<input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-disabled-Unknown" name="disabled" value="Unknown">
							<label class="btn btn-secondary inactive-button" id = "toggle-disabled-Unknown" for="btn-disabled-Unknown">Unknown</label>
						</div>
					</center>
					</div>
				
				<div class="col-sm-4">
					<div class="row">
						<center><p>Guessed</p></center>
					</div>
					<center>
						<div class="btn-group-vertical btn-group-toggle" role="group" id="guessed-btns" data-toggle="buttons">
							{%for option in ["True", "False"]%}
							<input type="radio" class="btn-check form-control patronInput mainButton" id="btn-guessed-{{option}}" name="guessed" value={{option}}>
							<label class="btn btn-secondary inactive-button" id = "toggle-guessed-{{option}}" for="btn-guessed-{{option}}">{{option}} </label>
							{%endfor%}
							<!-- <input type="radio" checked class="btn-check form-control patronInput mainButton" id="btn-guessed-Unknown" name="guessed" value="Unknown">
							<label class="btn btn-secondary inactive-button" id = "toggle-guessed-Unknown" for="btn-guessed-Unknown">Unknown</label> -->
						</div>
					</center>
					</div>
				</div>
			</div>
		</div>
		<div class="row"><br></div>
					
		<div class="row" style="justify-content:center">
			<tr>
				<div class="col-sm-4" style="width:58.5%; align-content:center;">
					<center>
						 <input id='submit' class="form-control patronInput mainButton enter-button"
							type="submit" value="Submit">
					</center>
				</div>
			</tr>
		</div>
		
		
        </form>
		<div class="row" style="justify-content:center; margin-left: 21%; margin-right: 21%; width:58%; justify-content:center; background-color:white"">
			<tr>
				<div class="col-sm-2 col-sm-offset-4" style="width:50%; align-content:left;">
					<center>
						<input id='getlast' class="form-control patronInput mainButton enter-button"
						type="button" onclick="location.href='/getlastpatron?mealsite={{mealsite}}';" value="Previous Submission">
					</center>
				</div>
				<div class="col-sm-2" style="width:50%; align-content:right;">
					<center>
						<input id='deletelast' class="form-control patronInput mainButton enter-button"
						type="button" onclick="location.href='/deletelastpatron?mealsite={{mealsite}}';" value="Undo Previous Submission">
					</center>
				</div>
			</tr>
		</div>
		
        {% include 'footer.html' %}
    </div>
	
<button class="open-button" onclick="openForm()">Open Form</button>

<div class="form-popup" id="myForm">
  <form action="/action_page.php" class="form-container">
   {{race1}}
    <button type="button" class="btn cancel" onclick="closeForm()">Close</button>
  </form>
</div>

<script>
function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}
</script>

</body>

<script src = "https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js">
</script>

<script src = "/static/js/moreoptionbuttons.js">
</script>

<script>
	'use strict';
	function check(tagName)
	{
		var check=document.getElementsByTagName(tagName);
		if (!check[i].checked){
			check[i].checked=true;
		}
	}
	function uncheck(tagName)
	{
		var uncheck=document.getElementsByTagName(tagName);
		if (uncheck[i].checked){
			uncheck[i].checked=false;
		}
	}
	function validateForm() {
		
		var x = document.forms["patronForm"]["guessed"].value;
		console.log(x)
		if (x == '') {
		alert("Please select True or False for Guess.");
			return false;
		}
		return true;
	}
	function handleResponse(response)
	{
		$('#error').html(response);
	}
	let request = null;
	function getResults()
	{
		
		request = $.ajax(
			{
				type: 'GET',
				url:url,
				success: handleResponse
			}
		);
	}
	function setup()
	{
		$("#checkboxid").removeAttr("checked");
		$(window).on('load', getResults);
		$('#dept').on('input', getResults);
		$('#coursenum').on('input', getResults);
		$('#area').on('input', getResults);
		$('#title').on('input', getResults);
	}
	$('document').ready(setup);
</script>

</html>

<style>
	/* .btn-secondary.active {
		background-color: #ff9f46;
	} */
	.btn-group-vertical {
		width: 120.5px;
	}

	.btn-secondary.checked, .btn-check:checked+.btn-secondary {
		background-color: #ff9f46;
	}

	.inactive-button {
		background-color: #bbb;
	}
	
	.special-container{
		display: table;
		height: 100%;
	}

	.vertical-center{
	display: table-cell;
	text-align: center;
	vertical-align: middle;
	}

	.active-recur-config {
		display: block !important;
	}

	.inactive-recur-config {
		display: none !important;
	}
	/* Button used to open the contact form - fixed at the bottom of the page */
.open-button {
  background-color: #555;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  opacity: 0.8;
  position: fixed;
  bottom: 23px;
  right: 28px;
  width: 280px;
}

/* The popup form - hidden by default */
.form-popup {
  display: none;
  position: fixed;
  bottom: 0;
  right: 15px;
  border: 3px solid #f1f1f1;
  z-index: 9;
}

/* Add styles to the form container */
.form-container {
  max-width: 300px;
  padding: 10px;
  background-color: white;
}

/* Full-width input fields */
.form-container input[type=text], .form-container input[type=password] {
  width: 100%;
  padding: 15px;
  margin: 5px 0 22px 0;
  border: none;
  background: #f1f1f1;
}

/* When the inputs get focus, do something */
.form-container input[type=text]:focus, .form-container input[type=password]:focus {
  background-color: #ddd;
  outline: none;
}

/* Set a style for the submit/login button */
.form-container .btn {
  background-color: #04AA6D;
  color: white;
  padding: 16px 20px;
  border: none;
  cursor: pointer;
  width: 100%;
  margin-bottom:10px;
  opacity: 0.8;
}

/* Add a red background color to the cancel button */
.form-container .cancel {
  background-color: red;
}

/* Add some hover effects to buttons */
.form-container .btn:hover, .open-button:hover {
  opacity: 1;
}
	body {
	/* background-image: url(https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Cathedral_of_St._Mary_of_the_Assumption_-_Trenton_02.JPG/1200px-Cathedral_of_St._Mary_of_the_Assumption_-_Trenton_02.JPG); */ */
	/* background-color: #cccccc; */
	}

</style>
